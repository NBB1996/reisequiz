<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>Reisequiz – Quizfrage</title>

    <!-- Bootstrap und Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

    <!-- Eigenes CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<div class="container">
    <header class="d-flex justify-content-between align-items-center mb-4">
        <h1>
            <img src="{{ url_for('static', filename='globe-icon.png') }}" alt="Icon" width="32" style="vertical-align: middle; margin-right: 8px;">
            Reisequiz
        </h1>
        <a href="{{ url_for('main.settings') }}" class="btn btn-outline-dark">Neues Quiz</a>
    </header>

    <!-- Kategorie-Übersicht -->
    <p class="text-muted">
        {{ session.quiz_config.kategorie }} | {{ session.quiz_config.kontinent }} | {{ session.quiz_config.level }}
    </p>

    <!-- Hinweisbild -->
    <img src="{{ frage.bild_url }}" alt="Hinweisbild" class="quiz-image img-fluid rounded mb-3">

    <!-- Hinweistext -->
    <div class="box-light mt-3 text-start">
        <h5><strong>Welcher Ort wird hier beschrieben?</strong></h5>
        <p>{{ frage.hinweistext }}</p>
    </div>

    <!-- Antwortmöglichkeiten -->
    <form id="quizForm" method="POST" action="{{ url_for('main.result') }}">
        <div class="row row-cols-1 row-cols-md-2 g-3 mt-3">
            {% for option in frage.antwortoptionen %}
            <div class="col">
                <button type="button" class="answer-option btn btn-outline-primary w-100" data-value="{{ option.name }}">
                    {{ option.name }}
                </button>
            </div>
            {% endfor %}
        </div>

        <!-- Fehlermeldung -->
        <div id="error-message" class="text-danger mt-3" style="display: none;">
            Bitte wähle eine Antwortoption aus.
        </div>

        <!-- Verstecktes Feld für Antwortübermittlung -->
        <input type="hidden" name="selected_answer" id="selected_answer">

        <!-- Prüfen-Button -->
        <button type="submit" class="btn btn-success mt-4" id="submitBtn" disabled>Antwort überprüfen</button>
    </form>
</div>

<!-- Antwortauswahl JavaScript -->
<script>
    const buttons = document.querySelectorAll('.answer-option');
    const selectedAnswer = document.getElementById('selected_answer');
    const submitBtn = document.getElementById('submitBtn');
    const errorMsg = document.getElementById('error-message');

    buttons.forEach(button => {
        button.addEventListener('click', () => {
            buttons.forEach(b => b.classList.remove('selected-answer', 'btn-primary'));
            button.classList.add('selected-answer', 'btn-primary');
            selectedAnswer.value = button.dataset.value;
            submitBtn.disabled = false;
            errorMsg.style.display = 'none';
        });
    });

    document.getElementById('quizForm').addEventListener('submit', function(e) {
        if (!selectedAnswer.value) {
            e.preventDefault();
            errorMsg.style.display = 'block';
        }
    });
</script>

</body>
</html>

